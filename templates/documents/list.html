{% extends "base.html" %}
{% load thai_filters %}

{% block title %}เอกสาร — Print Shop Manager{% endblock %}
{% block breadcrumb %}เอกสาร{% endblock %}

{% block content %}
<div class="space-y-4">

  <!-- Type filter tabs -->
  <div class="flex gap-2 flex-wrap">
    <a href="{% url 'documents:list' %}"
       class="px-4 py-2 rounded-lg text-sm font-medium transition-colors
              {% if not doc_type %}bg-indigo-600 text-white{% else %}bg-white border border-gray-200 text-gray-600 hover:bg-gray-50{% endif %}">
      ทั้งหมด
    </a>
    {% for value, label in document_types %}
    <a href="?type={{ value }}"
       class="px-4 py-2 rounded-lg text-sm font-medium transition-colors
              {% if doc_type == value %}bg-indigo-600 text-white{% else %}bg-white border border-gray-200 text-gray-600 hover:bg-gray-50{% endif %}">
      {{ label }}
    </a>
    {% endfor %}
  </div>

  <!-- Table -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
    <table class="w-full text-sm">
      <thead>
        <tr class="text-xs text-gray-500 uppercase border-b border-gray-100 bg-gray-50">
          <th class="text-left px-4 py-3">เลขที่</th>
          <th class="text-left px-4 py-3">ประเภท</th>
          <th class="text-left px-4 py-3">ลูกค้า</th>
          <th class="text-right px-4 py-3">ยอดรวม</th>
          <th class="text-left px-4 py-3 hidden sm:table-cell">วันที่ออก</th>
          <th class="px-4 py-3"></th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-50">
        {% for doc in documents %}
        <tr class="hover:bg-gray-50 transition-colors {% if doc.is_void %}opacity-50{% endif %}">
          <td class="px-4 py-3 font-mono text-sm font-medium">
            <a href="{% url 'documents:detail' doc.pk %}" class="text-indigo-600 hover:underline">
              {{ doc.document_number }}
            </a>
          </td>
          <td class="px-4 py-3 text-gray-600">{{ doc.get_document_type_display }}</td>
          <td class="px-4 py-3 text-gray-900">{{ doc.customer_name }}</td>
          <td class="px-4 py-3 text-right font-semibold">{{ doc.total_amount|baht }}</td>
          <td class="px-4 py-3 text-gray-500 hidden sm:table-cell">{{ doc.issued_at|thai_date_short }}</td>
          <td class="px-4 py-3 text-right">
            <a href="{% url 'documents:pdf' doc.pk %}"
               class="text-xs text-gray-500 hover:text-indigo-600 font-medium"
               target="_blank">PDF</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="px-4 py-10 text-center text-gray-400 text-sm">ยังไม่มีเอกสาร</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
