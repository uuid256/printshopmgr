{% load thai_filters %}
<div id="file-card-{{ file.pk }}" class="flex items-center gap-3 p-3 bg-gray-50 border border-gray-100 rounded-lg">

  <!-- Thumbnail or icon -->
  {% if file.is_image %}
  <a href="{{ file.file.url }}" target="_blank" class="flex-shrink-0">
    <img src="{{ file.file.url }}" alt="{{ file.filename }}"
         class="w-14 h-14 object-cover rounded border border-gray-200">
  </a>
  {% else %}
  <a href="{{ file.file.url }}" target="_blank"
     class="w-14 h-14 bg-white border border-gray-200 rounded flex items-center justify-center flex-shrink-0 hover:bg-gray-50">
    <span class="text-2xl">ðŸ“„</span>
  </a>
  {% endif %}

  <!-- Info -->
  <div class="flex-1 min-w-0">
    <a href="{{ file.file.url }}" target="_blank"
       class="text-sm font-medium text-gray-900 hover:text-indigo-600 truncate block">
      {{ file.filename }}
    </a>
    <div class="flex items-center gap-2 mt-0.5">
      <span class="text-xs px-1.5 py-0.5 rounded font-medium
        {% if file.file_type == 'proof' %}bg-blue-100 text-blue-700
        {% elif file.file_type == 'artwork' %}bg-green-100 text-green-700
        {% elif file.file_type == 'output' %}bg-purple-100 text-purple-700
        {% else %}bg-gray-100 text-gray-600{% endif %}">
        {{ file.get_file_type_display }}
      </span>
      <span class="text-xs text-gray-400">{{ file.filesize_display }}</span>
      <span class="text-xs text-gray-400">{{ file.uploaded_at|thai_date_short }}</span>
    </div>
    {% if file.notes %}
    <p class="text-xs text-gray-500 mt-0.5 truncate">{{ file.notes }}</p>
    {% endif %}
  </div>

  <!-- Delete button -->
  <form hx-post="{% url 'jobs:file_delete' job.pk file.pk %}"
        hx-target="#file-card-{{ file.pk }}"
        hx-swap="outerHTML"
        hx-confirm="à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œ {{ file.filename }}?">
    {% csrf_token %}
    <button type="submit"
            class="p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors"
            title="à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œ">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
    </button>
  </form>
</div>
