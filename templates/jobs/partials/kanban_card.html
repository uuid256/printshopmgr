{% load thai_filters %}
<div id="kanban-card-{{ job.pk }}"
     data-job-id="{{ job.pk }}"
     class="bg-white border border-gray-100 rounded-lg p-3 shadow-sm cursor-grab active:cursor-grabbing hover:border-indigo-200 transition-colors">

  <!-- Proof thumbnail if available -->
  {% with proof=job.first_proof_image %}
  {% if proof %}
  <a href="{{ proof.file.url }}" target="_blank" class="block mb-2">
    <img src="{{ proof.file.url }}" alt="proof"
         class="w-full h-24 object-cover rounded border border-gray-100">
  </a>
  {% endif %}
  {% endwith %}

  <!-- Job number + title -->
  <div class="flex items-start justify-between gap-2 mb-1.5">
    <a href="{% url 'jobs:detail' job.pk %}"
       class="text-sm font-semibold text-gray-900 hover:text-indigo-600 leading-tight">
      #{{ job.pk }} {{ job.title|truncatechars:35 }}
    </a>
  </div>

  <!-- Customer -->
  <p class="text-xs text-gray-500 truncate mb-2">{{ job.customer.name }}</p>

  <!-- Due date badge -->
  {% if job.due_date %}
  <span class="inline-block text-xs px-1.5 py-0.5 rounded font-medium
    {% if job.due_date < today %}bg-red-100 text-red-700
    {% elif job.due_date == today %}bg-orange-100 text-orange-700
    {% else %}bg-gray-100 text-gray-600{% endif %}">
    {{ job.due_date|thai_date_short }}
  </span>
  {% endif %}

  <!-- Designer badge -->
  {% if job.assigned_designer %}
  <span class="inline-block text-xs px-1.5 py-0.5 rounded bg-indigo-50 text-indigo-600 ml-1">
    {{ job.assigned_designer.get_full_name|default:job.assigned_designer.username|truncatechars:15 }}
  </span>
  {% endif %}
</div>
